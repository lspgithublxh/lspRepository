package com.bj58.fang.codeGenerate.json2json;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;

public class CodeGenerate2 {

	public static void main(String[] args) {
//		String content = "{    \"title\": {        \"text\": \"用户评价\",        \"count\": 2    },    \"content\": [        {            \"date\": \"2018-5-15\",            \"content\": \"hahahahaha\",            \"satisfy\": \"超赞\",            \"satisfyUrl\": \"http://img.58cdn.com.cn/fangrs/img/fc6a30d0e6bec4d32857024af0f17a5f.png\",            \"title\": \"匿名用户\",            \"highLevelUrl\": \"\",            \"tags\": [                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#517A99\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#517A99\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#517A99\"                }            ]        },        {            \"date\": \"2018-5-15\",            \"content\": \"hahahahaha\",            \"satisfy\": \"超赞\",            \"satisfyUrl\": \"http://img.58cdn.com.cn/fangrs/img/fc6a30d0e6bec4d32857024af0f17a5f.png\",            \"title\": \"匿名用户\",            \"highLevelUrl\": \"\",            \"tags\": [                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#517A99\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#517A99\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#517A99\"                }            ]        }    ],    \"fullStar\": \"http://img.58cdn.com.cn/fangrs/img/fc6a30d0e6bec4d32857024af0f17a5f.png\",    \"emptyStar\": \"http://img.58cdn.com.cn/fangrs/img/8967a463d2571a98ec8eb2b5e88855dc.png\",    \"type\": \"evaluate\",    \"note\": \"Ta没有评价纪录~\"}";
//		String content = "{\"quota\": [{				\"value\": \"4.8\",				\"key\": \"房源质量\",				\"keyColor\":\"#333333\",				\"levelBgColor\":\"#F7271B\",				\"level\":\"高\",				\"content\":\"高于同行\",				\"contentValue\":\"13%\",				\"contentValueColor\":\"#F7271B\"			}, {				\"value\": \"3.8\",				\"key\": \"服务效率\",				\"levelBgColor\":\"#f97237\",				\"level\":\"平\",				\"keyColor\":\"#333333\",				\"content\":\"平于同行\",				\"contentValue\":\"\",				\"contentValueColor\":\"#f97237\"			}, {				\"value\": \"2.8\",				\"key\": \"用户评价\",				\"levelBgColor\":\"#00D984\",				\"level\":\"低\",				\"keyColor\":\"#333333\",				\"content\":\"低于同行\",				\"contentValue\":\"10%\",				\"contentValueColor\":\"#00D984\"			}]}";
//		String content = "{\"serviceTime\":[[{\"text\": \"已在58服务\",\"color\": \"#999999\"}, {\"text\": \"17\",\"color\": \"#ff542e\"}, {\"text\": \"天\",\"color\": \"#999999\"}],[{\"text\": \"带看服务\",\"color\": \"#999999\"}, {\"text\": \"17\",\"color\": \"#ff542e\"}, {\"text\": \"次\",\"color\": \"#999999\"}]]}";
//		String content = "{    \"title\": {        \"text\": \"用户评价\",        \"count\": 2    },    \"content\": [        {            \"date\": \"2018-5-15\",            \"content\": \"hahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahaha\",            \"satisfy\": \"超赞\",            \"satisfyUrl\": \"\",            \"title\": \"匿名用户\",            \"highLevelUrl\": \"\",            \"tags\": [                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#EDF1F4\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#EDF1F4\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#EDF1F4\"                }            ]        },        {            \"date\": \"2018-5-15\",            \"content\": \"hahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahahaha\",            \"satisfy\": \"超赞\",            \"satisfyUrl\": \"\",            \"title\": \"匿名用户\",            \"highLevelUrl\": \"\",            \"tags\": [                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#EDF1F4\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#EDF1F4\"                },                {                    \"content\": \"熟悉政策\",                    \"contentColor\": \"#517A99\",                    \"bgColor\": \"#EDF1F4\"                }            ]        }    ],    \"fullStar\": \"http://img.58cdn.com.cn/fangrs/img/fc6a30d0e6bec4d32857024af0f17a5f.png\",    \"emptyStar\": \"http://img.58cdn.com.cn/fangrs/img/8967a463d2571a98ec8eb2b5e88855dc.png\",    \"type\": \"evaluate\",    \"note\": \"Ta没有评价纪录~\"}";
//		String content = "{\"evaluateInfo\": [    {        \"value\": \"4.8\",        \"key\": \"房源质量\",        \"keyColor\": \"#333333\",        \"levelBgColor\": \"#F7271B\",        \"level\": \"高\",        \"content\": \"高于同行\",        \"contentValue\": \"13%\",        \"contentValueColor\": \"#F7271B\"    },    {        \"value\": \"3.8\",        \"key\": \"服务效率\",        \"levelBgColor\": \"#f97237\",        \"level\": \"平\",        \"keyColor\": \"#333333\",        \"content\": \"平于同行\",        \"contentValue\": \"\",        \"contentValueColor\": \"#f97237\"    },    {        \"value\": \"2.8\",        \"key\": \"用户评价\",        \"levelBgColor\": \"#00D984\",        \"level\": \"低\",        \"keyColor\": \"#333333\",        \"content\": \"低于同行\",        \"contentValue\": \"10%\",        \"contentValueColor\": \"#00D984\"    }]}";
//		String content = "{\"serviceTime\": [    [        {            \"text\": \"已在58服务\",            \"color\": \"#999999\"        },        {            \"text\": \"17\",            \"color\": \"#ff542e\"        },        {            \"text\": \"天\",            \"color\": \"#999999\"        }    ],    [        {            \"text\": \"带看服务\",            \"color\": \"#999999\"        },        {            \"text\": \"17\",            \"color\": \"#ff542e\"        },        {            \"text\": \"次\",            \"color\": \"#999999\"        }    ]]}";
		String content = "{    \"code\": 0,    \"message\": \"success\",    \"data\": {        \"currentPage\": 1,        \"pageSize\": 3,        \"totalCount\": 3,        \"totalPage\": 1,        \"houseList\": [            {                \"cityListName\": \"jn\",                \"infoId\": 33620844105925,                \"title\": \"大明湖小区 3室1厅1卫\",                \"contactCount\": 0,                \"price\": 5006,                \"isPayPost\": 0,                \"isFangbenRenzhenged\": 0,                \"topLeftAngleUrl\": \"https://img.58cdn.com.cn/fangrs/img/e39a683e7029110f64ddf50207dd9283.png\",                \"performList\": [                    {                        \"modify\": {                            \"actionName\": \"修改\",                            \"imageUrl\": \"\",                            \"tips\": \"确认操作?\",                            \"type\": \"jump\",                            \"url\": \"https://pwebapp.58.com/fang/update/33620844105925?os=android\",                            \"action\": {                                \"action\": \"pagetrans\",                                \"tradeline\": \"house\",                                \"content\": {                                    \"bundleid\": \"\",                                    \"title\": \"\",                                    \"action\": \"loadpage\",                                    \"pagetype\": \"publish\",                                    \"showarea\": 1,                                    \"url\": \"https://pwebapp.58.com/fang/update/33620844105925?os=android\",                                    \"isfinish\": false,                                    \"backtoroot\": false                                }                            }                        }                    },                    {                        \"unShelve\": {                            \"actionName\": \"下架\",                            \"imageUrl\": \"\",                            \"tips\": \"确定下架这条信息？\",                            \"type\": \"alert\",                            \"url\": \"https://houserent.m.58.com/landlord/unShelve?infoId=33620844105925\"                        }                    },                    {                        \"more\": {                            \"actionName\": \"更多\",                            \"imageUrl\": \"\",                            \"tips\": \"确认操作?\",                            \"type\": \"\",                            \"url\": \"https:\",                            \"extra\": [                                {                                    \"actionName\": \"分享\",                                    \"imageUrl\": \"\",                                    \"tips\": \"确认操作?\",                                    \"type\": \"share\",                                    \"url\": \"https://i.m.58.com/bj/zufang/33620844105925x.shtml?isself=1&707&utps=1381740504000\",                                    \"action\": {                                        \"action\": \"info_share\",                                        \"tradeline\": \"house\",                                        \"content\": {                                            \"bundleid\": \"\",                                            \"title\": \"\",                                            \"action\": \"info_share\",                                            \"pagetype\": \"link\",                                            \"showarea\": 1,                                            \"url\": \"https://i.m.58.com/bj/zufang/33620844105925x.shtml?isself=1&707&utps=1381740504000\",                                            \"isfinish\": false,                                            \"backtoroot\": false                                        },                                        \"data\": {                                            \"content\": \"打开58App，看更多同城新鲜事\",                                            \"picurl\": \"https://img.58cdn.com.cn/ui8/house/detail/images/newdefaultPic@2x.png\",                                            \"placeholder\": \"\",                                            \"title\": \"大明湖小区 3室1厅1卫\",                                            \"url\": \"https://i.m.58.com/bj/zufang/33620844105925x.shtml?isself=1&707&utps=1381740504000\",                                            \"cateid\": 8,                                            \"infoid\": 33620844105925,                                            \"rootcateid\": 1,                                            \"messageContent\": {                                                \"des\": \"3室1厅1卫 150㎡\",                                                \"hasVideo\": 0,                                                \"img\": \"https://img.58cdn.com.cn/ui8/house/detail/images/newdefaultPic@2x.png\",                                                \"jsonVersion\": 1,                                                \"name\": \"大明湖小区 3室1厅1卫\",                                                \"price\": \"5006元/月\",                                                \"tradeType\": 2,                                                \"type\": \"anjuke_fangyuan\",                                                \"url\": \"https://i.m.58.com/bj/zufang/33620844105925x.shtml?isself=1&707&utps=1381740504000\"                                            }                                        },                                        \"extshareto\": \"QQ,SINA,WEIXIN,FRIENDS,COPY,CHART,FACETOFACE\",                                        \"pagetype\": \"detail\",                                        \"type\": \"share\",                                        \"shareToRoute\": {                                            \"CHART\": \"wbmain://jump/house/shareChart?params=%7B%22slogan%22%3A%22%5Cu6211%5Cu89c9%5Cu5f9758%5Cu4e0a%5Cu8fd9%5Cu5957%5Cu623f%5Cu5f88%5Cu4e0d%5Cu9519%5Cuff01%22%2C%22location%22%3A%22%5Cu6d4e%5Cu5357%5Cu00b7%5Cu5386%5Cu4e0b%5Cu00b7%5Cu6cc9%5Cu57ce%5Cu516c%5Cu56ed%22%2C%22title%22%3A%22%5Cu6574%5Cu79df+%5Cu5927%5Cu660e%5Cu6e56%5Cu5c0f%5Cu533a+3%5Cu5ba41%5Cu53851%5Cu536b%22%2C%22huxing%22%3A%223%5Cu5ba41%5Cu53851%5Cu536b%22%2C%22area%22%3A%22150%5Cu33a1%22%2C%22price%22%3A%225006%22%2C%22priceUnit%22%3A%22%5Cu5143%5C%2F%5Cu6708%22%2C%22tips%22%3A%22%5Cu623f%5Cu6e90%5Cu6765%5Cu81ea58%5Cu540c%5Cu57ce%22%2C%22qrCodeUrl%22%3A%22http%3A%5C%2F%5C%2Fhouserentapp.58.com%5C%2Fwechat%5C%2FApi_get_detail_qrcode%3FinfoId%3D33620844105925%26listName%3Dzufang%26localName%3Djn%26fullPath%3D1%2C8%26signature%3Dc6dad8748ce65a51bccdf94504785572%22%2C%22houseImg%22%3A%22https%3A%5C%2F%5C%2Fimg.58cdn.com.cn%5C%2Fui8%5C%2Fhouse%5C%2Fdetail%5C%2Fimages%5C%2FnewdefaultPic%402x.png%3Fw%3D600%26h%3D450%26crop%3D1%22%7D\",                                            \"FACETOFACE\": \"wbmain://jump/core/common?params=%7B%22url%22%3A%22https%3A%5C%2F%5C%2Fhouserentapp.58.com%5C%2Fcenter%5C%2Ferweima%3FinfoId%3D33620844105925%26listName%3Dzufang%26localName%3Djn%26fullPath%3D1%2C8%26deposit%3D1%22%2C%22title%22%3A%22%5Cu626b%5Cu7801%5Cu67e5%5Cu770b%5Cu623f%5Cu6e90%22%2C%22list_name%22%3A%22%22%2C%22categoryid%22%3A%22%22%2C%22loadingtype%22%3A0%2C%22backtoroot%22%3Afalse%2C%22domainTips%22%3A%22%22%2C%22backprotocal%22%3A%22%22%7D\"                                        }                                    }                                },                                {                                    \"actionName\": \"收订金\",                                    \"imageUrl\": \"\",                                    \"tips\": \"确认操作?\",                                    \"type\": \"jump\",                                    \"url\": \"https://houserentapp.58.com/center/erweima?infoId=33620844105925&listName=zufang&localName=jn&fullPath=1,8&deposit=2\",                                    \"action\": {                                        \"action\": \"pagetrans\",                                        \"tradeline\": \"house\",                                        \"content\": {                                            \"bundleid\": \"\",                                            \"title\": \"扫码交订金\",                                            \"action\": \"loadpage\",                                            \"pagetype\": \"link\",                                            \"showarea\": 1,                                            \"url\": \"https://houserentapp.58.com/center/erweima?infoId=33620844105925&listName=zufang&localName=jn&fullPath=1,8&deposit=2\",                                            \"isfinish\": false,                                            \"backtoroot\": false                                        }                                    }                                }                            ]                        }                    }                ],                \"img\": \"https://img.58cdn.com.cn/fangrs/img/6acb3ac1cf915a444745b20a17dd44d8.png\",                \"state\": 1,                \"stateStr\": \"显示中\",                \"stateStrCorDict\": {                    \"strCor\": \"#ffffff\",                    \"bgcCor\": \"#474C57\"                },                \"detailaction\": {                    \"action\": \"pagetrans\",                    \"tradeline\": \"house\",                    \"content\": {                        \"title\": \"我的发布\",                        \"action\": \"loadpage\",                        \"pagetype\": \"common\",                        \"showarea\": \"true\",                        \"url\": \"https://houserentapp.58.com/center/get_house_list\"                    }                },                \"stateDesc\": \"房本认证已通过，耐心等待租客联系吧\",                \"leaseExpedite\": {                    \"title\": \"出租提速\",                    \"iconUrl\": \"\",                    \"action\": {                        \"action\": \"pagetrans\",                        \"tradeline\": \"RN\",                        \"content\": {                            \"title\": \"加速中心\",                            \"bundleid\": \"71\",                            \"pagetype\": \"RN\",                            \"params\": {                                \"hideBar\": 1,                                \"infoId\": 33620844105925,                                \"full_path\": \"1,8\"                            },                            \"isfinish\": false,                            \"backtoroot\": false                        }                    }                },                \"video\": {                    \"videoState\": 0,                    \"infoID\": \"33476475076036\",                    \"title\": \"房源视频\",                    \"buttonTitle\": \"立即拍摄\",                    \"action\": {                        \"type\": \"action\",                        \"routerUrl\": \"wbmain://jump/house/videoRecord?params=%7B%22source%22%3A%22house%22%2C%22toastTime%22%3A%22170%22%2C%22infoID%22%3A%2233476475076036%22%2C%22recordTitle%22%3A%22%5Cu89c6%5Cu9891%5Cu5f55%5Cu5236%22%2C%22hideRotateButton%22%3A1%2C%22full_path%22%3A%221%2C8%22%2C%22ruleAction%22%3A%22%22%2C%22totalTime%22%3A%22180%22%7D\"                    }                },                \"ext\": [                    \"发布于 04.02\",                    \"浏览 185\",                    \"收藏 3\"                ]            },            {                \"cityListName\": \"jn\",                \"infoId\": 32578654206791,                \"title\": \"大明湖泉馨居 2室2厅1卫\",                \"contactCount\": 0,                \"price\": 9000,                \"isPayPost\": 1,                \"isFangbenRenzhenged\": 0,                \"topLeftAngleUrl\": \"https://img.58cdn.com.cn/fangrs/img/e39a683e7029110f64ddf50207dd9283.png\",                \"performList\": [                    {                        \"recover\": {                            \"actionName\": \"重新上架\",                            \"imageUrl\": \"\",                            \"tips\": \"确定上架这条信息？\",                            \"type\": \"alert\",                            \"url\": \"https://houserent.m.58.com/landlord/recoverHouseV2?infoId=32578654206791&platform=app\"                        }                    },                    {                        \"delete\": {                            \"actionName\": \"删除\",                            \"imageUrl\": \"\",                            \"tips\": \"信息删除后将不能恢复\",                            \"type\": \"alert\",                            \"url\": \"https://houserent.m.58.com/landlord/deleteHouse/?infoId=32578654206791\"                        }                    }                ],                \"img\": \"https://img.58cdn.com.cn/fangrs/img/6acb3ac1cf915a444745b20a17dd44d8.png\",                \"state\": 0,                \"stateStr\": \"已下架\",                \"stateStrCorDict\": {                    \"strCor\": \"#ffffff\",                    \"bgcCor\": \"#474C57\"                },                \"detailaction\": {                    \"action\": \"pagetrans\",                    \"tradeline\": \"house\",                    \"content\": {                        \"title\": \"我的发布\",                        \"action\": \"loadpage\",                        \"pagetype\": \"common\",                        \"showarea\": \"true\",                        \"url\": \"https://houserentapp.58.com/center/get_house_list\"                    }                },                \"stateDesc\": \"已下架，重新上架即可再次出租\",                \"payStartTime\": \"2017-12-29 12:12:16\",                \"ext\": [                    \"发布于 12.29\",                    \"浏览 443\",                    \"收藏 1\"                ]            }        ],        \"postCount\": 3    }}";
		generate(JSONObject.parseObject(content));
		Integer i = 0;
//		System.out.println(i.getClass().getName());
	}

	private static void generate(JSONObject json) {
		printJSON(json, "userValuate");
	}
	
	/**
	 * 建立观点：打印角度
	 * @param 
	 * @author lishaoping
	 * @Date 2018年5月18日
	 * @Package com.bj58.fang.codeGenerate.json2json
	 * @return void
	 */
	private static void printJSON(JSONObject target, String name) {
		System.out.println(String.format("JSONObject %s = new JSONObject();",  name));
		for(String key : target.keySet()) {
			Object val = target.get(key);
			String type = val.getClass().getName();
			if(type.contains("Integer") || type.contains("Double") || type.contains("Decimal")
					|| type.contains("Long")) {
				System.out.println(String.format("%s.put(\"%s\", %s);", name, key, val));
			}else if(type.contains("String")) {
				System.out.println(String.format("%s.put(\"%s\", \"" +"%s\");",name, key, val));
//				System.out.println(name + ".put(" + key + ",\"" + val + "\");");
			}else if(type.contains("JSONObject")) {
				String variblename = key + System.currentTimeMillis();
				printJSON((JSONObject)val, variblename);
				System.out.println(String.format("%s.put(\"%s\", %s);", name, key, variblename));
			}else if(type.contains("JSONArray")) {
				JSONArray arr = (JSONArray) val;
				String valuename = key + System.currentTimeMillis();
				printJSONArray(valuename, arr);//name是数组属于的json变量名
				System.out.println(String.format("%s.put(\"%s\", %s);", name, key, valuename));
			}
		}
	}

	//编程序，重要是职责分明，各个方法不要做不应该做的，否则程序本身反而复杂了   一点不清晰。。不好构造递归，，不好复合调用-多处调用。。。甚至参数选择都有要求和限制
	
	private static void printJSONArray(String key, JSONArray arr) {//key是数组变量名, 
		System.out.println(String.format("JSONArray %s = new JSONArray();",  key));
		for(int i = 0 ; i < arr.size(); i++) {
			Object a_val = arr.get(i);
			String aname = (key + i + "" + System.currentTimeMillis());
			Object t_val = keyvalueHandle(a_val, aname);//第一个是值，第二个是试着给那个值赋予变量名称， 
			System.out.println(String.format("%s.add(%s);", key, t_val));
		}
	}

	/**
	 * 
	 * @param 
	 * @author lishaoping
	 * @Date 2018年5月18日
	 * @Package com.bj58.fang.codeGenerate.json2json
	 * @return void
	 */
	private static Object keyvalueHandle(Object a_val, String name) {//name是这个值的变量名
		String type = a_val.getClass().getName();
		Object val = null;
		if(type.contains("Integer") || type.contains("Double") || type.contains("Decimal")
				|| type.contains("Long")) {
			val = a_val;
		}else if(type.contains("String")) {
			val = String.format("\"%s\"", a_val);
		}else if(type.contains("JSONObject")) {
			printJSON((JSONObject) a_val, name);
			val = name;
		}else if(type.contains("JSONArray")) {
			String arrName = (name + System.currentTimeMillis());
			printJSONArray(arrName, (JSONArray) a_val);
			val = arrName;
		}
		return val;
	}
	
	
}
